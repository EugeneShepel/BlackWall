Замечания:

  не дописал фильтрацию по ТИПАМ относящуюся к выбранной валюте;</br>
  усложнил себе работу не замокав исходные данные на сервере;
