Замечания:

  не дописал фильтрацию по ТИПАМ относящуюся к выбранной валюте;
  усложнил себе работу не замокав исходные данные на сервере;
